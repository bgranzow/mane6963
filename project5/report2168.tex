\documentclass[11pt]{article}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage[fleqn]{amsmath}
\usepackage{listings}
\usepackage{color}
\usepackage{graphicx}
\usepackage{subcaption}

\lstdefinestyle{matlab-style}{
language=Matlab,
basicstyle=\scriptsize\ttfamily,
tabsize=2,
rulecolor=,
language=matlab,
basicstyle=\tiny,
aboveskip={1.5\baselineskip},
columns=fullflexible,
showstringspaces=false,
extendedchars=true,
breaklines=true,
prebreak = \raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}},
frame=single,
showtabs=false,
showspaces=false,
showstringspaces=false,
identifierstyle=\ttfamily,
keywordstyle=\color[rgb]{0,0,1},
commentstyle=\color[rgb]{0.133,0.545,0.133},
stringstyle=\color[rgb]{0.627,0.126,0.941},
keepspaces=true,
numbers=left,
numbersep=5pt,
numberstyle=\tiny\color[rgb]{0.5,0.5,0.5},
stepnumber=1
}

\newcommand{\bs}[1] {\boldsymbol{#1}}

\title{A Matlab implementation of L-BFGS-B}
\author{Brian Granzow}
\date{}

\begin{document}

\maketitle

\section{Introduction}
In this report, we discuss the implementation of a limited
memory quasi-Newton bound-constrained optimization algorithm
to solve optimization problems of the form:
\begin{equation}
\begin{aligned}
& \underset{x}{\text{minimize}}
& & f(x) \\
& \text{subject to}
& & l \leq x \leq u.
\end{aligned}
\end{equation}

\newpage

\section{Appendix : code listings}

\lstinputlisting[style=matlab-style,caption=LBFGSB.m]{LBFGSB.m}
\newpage
\lstinputlisting[style=matlab-style,caption=validate\_inputs.m]{validate_inputs.m}
\newpage
\lstinputlisting[style=matlab-style,caption=set\_options.m]{set_options.m}
\lstinputlisting[style=matlab-style,caption=initialize.m]{initialize.m}
\newpage
\lstinputlisting[style=matlab-style,caption=get\_convergence.m]{get_convergence.m}
\lstinputlisting[style=matlab-style,caption=print\_iteration.m]{print_iteration.m}
\newpage
\lstinputlisting[style=matlab-style,caption=get\_tdidx.m]{get_tdidx.m}
\newpage
\lstinputlisting[style=matlab-style,caption=get\_cauchy\_point.m]{get_cauchy_point.m}
\end{document}
